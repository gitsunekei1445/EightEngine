import sys
sys.path.append("..")
from glfw import init,create_window,get_time,poll_events,swap_buffers,window_should_close,terminate,make_context_current,set_window_pos
class GUI :
    def __init__(self):
        # version 0.2
        self.width      = 400
        self.height     = 300
        self.positionX  = 400
        self.positionY  = 200
        self.fullscreen = None
        self.title      = 'EightEngine'
        self.share      = None
        self.gui        = None
        self.gui_close  = None
        self.icon       = None
        self.icon_reference = 'icon.png'
        self.fps        = 0
        self.fps_show   = 0
        self.timerNow   = 0
        self.timerStart = 0
        self.timeOn     = False
        if not init():
            raise Exception('GLFW can not import function init')

    def gui_create(self,width,height,title):
        # version 0.2
        if width > 1 and height > 1:
            self.width  = width
            self.height = height
            self.title  = title
            self.gui=create_window(self.width,self.height,self.title,self.fullscreen,self.share)
            if not self.gui:
                raise Exception('GLFW cen not create window ')
            set_window_pos(self.gui,self.positionX,self.positionY)
            make_context_current(self.gui)
        else:
            raise Exception('input width and height > 0')

    def gui_update(self):
        # version 0.1
        poll_events()
        if not self.gui :
            raise Exception('window not create')
        else:
            swap_buffers(self.gui)
            self.gui_close = window_should_close(self.gui)

    def gui_Fps(self):
        # version 0.2
        self.fps+=1
        if not self.timeOn:
            self.timeOn = True
            self.timerStart = get_time()
        self.timerNow = get_time()
        if self.timerNow-self.timerStart >= 1:
            print(self.fps)
            self.fps =0
            self.timerStart=self.timerNow



if __name__ == '__main__':
    # Example GUI
    init()
    time1 = get_time()
    gui = GUI();
    gui.gui_create(1270,720,'test')
    time2 = get_time()
    print(time2-time1)
    while not gui.gui_close:
        gui.gui_update()
        gui.gui_Fps()
